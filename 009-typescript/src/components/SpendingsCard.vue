<script setup lang="ts">
import {useRoute} from "vue-router";
import {computed, onMounted} from "vue";
import {usePartyStore} from "@/stores/partyStore.ts";
import {storeToRefs} from "pinia";

const route = useRoute();
const partyId = computed(() => route.params.partyId as string);
const partyStore = usePartyStore();
const { spendings } = storeToRefs(partyStore);

onMounted(async () => {
  await partyStore.loadSpendingsByPartyId(partyId.value);
})
</script>

<template>
  <div class="card card-translated spendings-card">
    <h2>üßæ –†–∞—Å—Ö–æ–¥—ã</h2>
    <div class="form-group">
      <label for="new-spending-name">–ó–∞ —á—Ç–æ –ø–ª–∞—Ç–∏–ª–∏?</label>
      <input type="text" id="new-spending-name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, –ê—Ä–µ–Ω–¥–∞ –ª—ã–∂" />
    </div>
    <div class="form-group">
      <label for="new-spending-amount">–°—É–º–º–∞:</label>
      <input type="text" id="new-spending-amount" placeholder="5000" />
    </div>
    <div class="form-group">
      <label for="new-spending-amount">–ö—Ç–æ –ø–ª–∞—Ç–∏–ª?</label>
      <select name="participants" id="participants">
        <option value="UUID1">–í–∞—Å—è</option>
        <option value="UUID1">–í–∞—Å—è</option>
        <option value="UUID1">–í–∞—Å—è</option>
        <option value="UUID1">–í–∞—Å—è</option>
      </select>
    </div>

    <button class="btn btn-main">–î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥</button>

    <h3 class="spendings-list-title">–°–ø–∏—Å–æ–∫ —Ä–∞—Å—Ö–æ–¥–æ–≤:</h3>
    <ul class="spendings-list">
      <li class="spending-item" v-for="spending in spendings">
        <div class="spending-item-info">
          <div class="spending-name">{{ spending.name }}</div>
          <div>–û–ø–ª–∞—Ç–∏–ª(–∞): {{ spending.payer.name }}</div>
          <div>–°—É–º–º–∞: <span class="spending-amount">{{ spending.amount }}</span></div>
        </div>
        <div>
          <button class="btn-edit">‚úèÔ∏è</button>
          <button>‚ùå</button>
        </div>
      </li>

<!--      <li class="spending-item">-->
<!--        <div class="spending-item-info">-->
<!--          <div class="spending-name">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç—Ä–∞—Ç—ã</div>-->
<!--          <div>–û–ø–ª–∞—Ç–∏–ª(–∞): –ú–∞—à–∞</div>-->
<!--          <div>–°—É–º–º–∞: <span class="spending-amount">–ú–∞—à–∞</span></div>-->
<!--        </div>-->
<!--        <div>-->
<!--          <button class="btn-edit">‚úèÔ∏è</button>-->
<!--          <button>‚ùå</button>-->
<!--        </div>-->
<!--      </li>-->

<!--      <li class="spending-item">-->
<!--        <span class="spending-name">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç—Ä–∞—Ç—ã</span>-->
<!--        <div>-->
<!--          <button class="btn-edit">‚úèÔ∏è</button>-->
<!--          <button>‚ùå</button>-->
<!--        </div>-->
<!--      </li>-->

<!--      <li class="spending-item">-->
<!--        <span class="spending-name">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç—Ä–∞—Ç—ã</span>-->
<!--        <div>-->
<!--          <button class="btn-edit">‚úèÔ∏è</button>-->
<!--          <button>‚ùå</button>-->
<!--        </div>-->
<!--      </li>-->

    </ul>
  </div>
</template>

<style scoped>

</style>